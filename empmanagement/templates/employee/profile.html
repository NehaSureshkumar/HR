{% extends 'employee/base.html' %}
{% load static %}

{% block title %}My Profile - Employee Management System{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
        <!-- Profile Header -->
        <div class="bg-gradient-to-r from-blue-600 to-blue-800 px-6 py-4">
            <div class="flex items-center space-x-4">
                <div class="flex-shrink-0">
                    <img class="h-20 w-20 rounded-full border-4 border-white" src="{% static 'images/default-avatar.png' %}" alt="Profile Picture">
                </div>
                <div class="flex-1">
                    <h1 class="text-2xl font-bold text-white">{{ employee.firstName }} {{ employee.lastName }}</h1>
                    <p class="text-blue-100">{{ employee.designation }}</p>
                    <p class="text-blue-100">Employee ID: {{ employee.eID }}</p>
                </div>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="border-b border-gray-200">
            <nav class="flex flex-wrap space-x-8 px-6" aria-label="Profile sections">
                <button class="tab-btn px-1 py-4 text-sm font-medium border-b-2 border-blue-500 text-blue-600" onclick="showTab('personal')" id="personal-tab">
                    Personal Details
                </button>
                <button class="tab-btn px-1 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300" onclick="showTab('contact')" id="contact-tab">
                    Contact Info
                </button>
                <button class="tab-btn px-1 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300" onclick="showTab('employment')" id="employment-tab">
                    Employment
                </button>
                <button class="tab-btn px-1 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300" onclick="showTab('bank')" id="bank-tab">
                    Bank Details
                </button>
                <button class="tab-btn px-1 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300" onclick="showTab('emergency')" id="emergency-tab">
                    Emergency Contact
                </button>
                <button class="tab-btn px-1 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300" onclick="showTab('id-card')" id="id-card-tab">
                    ID Card
                </button>
                <button class="tab-btn px-1 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300" onclick="showTab('wifi')" id="wifi-tab">
                    WiFi Access
                </button>
                <button class="tab-btn px-1 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300" onclick="showTab('parking')" id="parking-tab">
                    Parking
                </button>
                <button class="tab-btn px-1 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300" onclick="showTab('insurance')" id="insurance-tab">
                    Insurance
                </button>
            </nav>
        </div>

        <!-- Tab Content -->
        <div class="p-6">
            <!-- Personal Details Tab -->
            <div id="personal-content" class="tab-content">
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">Personal Information</h2>
                    <form method="post" class="space-y-6">
                        {% csrf_token %}
                        <input type="hidden" name="form_type" value="personal">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">First Name</label>
                                <input type="text" name="firstName" value="{{ employee.firstName }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">Last Name</label>
                                <input type="text" name="lastName" value="{{ employee.lastName }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">Date of Birth</label>
                                <input type="date" name="dOB" value="{{ employee.dOB|date:'Y-m-d' }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">Aadhar Number</label>
                                <input type="text" name="addharNo" value="{{ employee.addharNo }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                Save Personal Details
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Contact Info Tab -->
            <div id="contact-content" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">Contact Information</h2>
                    <form method="post" class="space-y-6">
                        {% csrf_token %}
                        <input type="hidden" name="form_type" value="contact">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">Email</label>
                                <input type="email" name="email" value="{{ employee.email }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">Personal Email</label>
                                <input type="email" name="personal_email" value="{{ employee.personal_email }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">Phone Number</label>
                                <input type="tel" name="phoneNo" value="{{ employee.phoneNo }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                </div>
                        <div class="flex justify-end">
                            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                Save Contact Info
                            </button>
                </div>
                    </form>
                </div>
            </div>

            <!-- Employment Tab -->
            <div id="employment-content" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">Employment Details</h2>
                    <form method="post" class="space-y-6">
                        {% csrf_token %}
                        <input type="hidden" name="form_type" value="employment">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {% for field in employee_info_form %}
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">{{ field.label }}</label>
                                {{ field }}
                                {% if field.errors %}
                                <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                Save Employment Details
                            </button>
            </div>
        </form>
                </div>
    </div>

            <!-- Bank Details Tab -->
            <div id="bank-content" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">Bank Account Details</h2>
        <form method="post" class="space-y-6">
            {% csrf_token %}
                        <input type="hidden" name="form_type" value="bank">
                        
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">Bank Name</label>
                                <input type="text" name="bank_name" value="{{ bank_details.bank_name }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">Account Number</label>
                                <input type="text" name="account_number" value="{{ bank_details.account_number }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">IFSC Code</label>
                                <input type="text" name="ifsc" value="{{ bank_details.ifsc }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">Branch</label>
                                <input type="text" name="branch" value="{{ bank_details.branch }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                </div>
                </div>
                        <div class="flex justify-end">
                            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                Save Bank Details
                            </button>
                </div>
                    </form>
                </div>
            </div>

            <!-- Emergency Contact Tab -->
            <div id="emergency-content" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">Emergency Contact Information</h2>
                    <form method="post" class="space-y-6">
                        {% csrf_token %}
                        <input type="hidden" name="form_type" value="emergency">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">Emergency Contact Name</label>
                                <input type="text" name="emergency_contact_name" value="{{ profile.emergency_contact_name }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">Emergency Contact Phone</label>
                                <input type="tel" name="emergency_contact_phone" value="{{ profile.emergency_contact_phone }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            </div>
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                Save Emergency Contact
                            </button>
            </div>
        </form>
    </div>
    </div>

            <!-- ID Card Tab -->
            <div id="id-card-content" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">ID Card Information</h2>
                    <form method="post" class="space-y-6">
            {% csrf_token %}
            <input type="hidden" name="form_type" value="id_card">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {% for field in id_card_form %}
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">{{ field.label }}</label>
                                {{ field }}
                                {% if field.errors %}
                                <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                Save ID Card Details
                            </button>
            </div>
        </form>
                </div>
    </div>

            <!-- WiFi Access Tab -->
            <div id="wifi-content" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">WiFi Access Information</h2>
                    <form method="post" class="space-y-6">
            {% csrf_token %}
            <input type="hidden" name="form_type" value="wifi_access">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {% for field in wifi_access_form %}
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">{{ field.label }}</label>
                                {{ field }}
                                {% if field.errors %}
                                <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                Save WiFi Access Details
                            </button>
            </div>
        </form>
                </div>
    </div>

            <!-- Parking Tab -->
            <div id="parking-content" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">Parking Information</h2>
                    <form method="post" class="space-y-6">
            {% csrf_token %}
            <input type="hidden" name="form_type" value="parking">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {% for field in parking_form %}
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">{{ field.label }}</label>
                                {{ field }}
                                {% if field.errors %}
                                <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                Save Parking Details
                            </button>
            </div>
        </form>
    </div>
    </div>

            <!-- Insurance Tab -->
            <div id="insurance-content" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">Insurance Information</h2>
                    <form method="post" class="space-y-6">
                        {% csrf_token %}
                        <input type="hidden" name="form_type" value="insurance">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {% for field in insurance_form %}
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700">{{ field.label }}</label>
                                {{ field }}
                                {% if field.errors %}
                                <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>
                        <div class="flex justify-end">
                            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                Save Insurance Details
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            </div>
    </div>
</div>

<script>
function showTab(tabName) {
    // Hide all tab contents
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.add('hidden');
    });
    
    // Show selected tab content
    document.getElementById(tabName + '-content').classList.remove('hidden');
    
    // Update tab button styles
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('border-b-2', 'border-blue-500', 'text-blue-600');
        btn.classList.add('text-gray-500');
    });
    
    // Style active tab button
    const activeBtn = document.getElementById(tabName + '-tab');
    activeBtn.classList.remove('text-gray-500');
    activeBtn.classList.add('border-b-2', 'border-blue-500', 'text-blue-600');
}

// Show the first tab by default
document.addEventListener('DOMContentLoaded', function() {
    showTab('personal');
    });
</script>
{% endblock %} 